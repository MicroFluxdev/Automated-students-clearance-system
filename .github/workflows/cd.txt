name: React Vite CD

on:
    workflow_run:
        workflows: ["React Vite CI"]
        types:
            - completed

jobs:
    deploy:
        if: ${{ github.event.workflow_run.conclusion == 'success' }}
        runs-on: ubuntu-latest

        steps:
            - name: üß≠ Checkout Code
              uses: actions/checkout@v4

            - name: üì• Download Build Artifact
              uses: dawidd6/action-download-artifact@v8
              with:
                  workflow: React Vite CI
                  name: vite-dist
                  path: dist

            - name: ‚öôÔ∏è Setup Node
              uses: actions/setup-node@v4
              with:
                  node-version: 18.x

            - name: üöÄ Deploy to Vercel
              uses: amondnet/vercel-action@v25
              with:
                  vercel-token: ${{ secrets.VERCEL_TOKEN }}
                  vercel-org-id: ${{ secrets.VERCEL_ORG_ID }}
                  vercel-project-id: ${{ secrets.VERCEL_PROJECT_ID }}
                  working-directory: .
                  vercel-args: "--prod"
